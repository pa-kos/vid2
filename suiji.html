<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>随机内容展示</title>
    <style>
        /* 保持原有样式不变 */
        #favoriteButton { /* 悬浮按钮样式 */ }
        #favoriteModal { /* 弹窗样式 */ }
        #modalBackground { /* 背景遮罩 */ }
        
        /* 新增加载状态提示 */
        #loading {
            text-align: center;
            padding: 20px;
            font-size: 18px;
        }
        #error-message {
            color: red;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div id="content">
        <div id="loading">
            <h1>正在为你寻找内容...请稍后...</h1>
            <div id="error-message"></div>
        </div>
        <br>
        <a id="xunlei" href="https://qm.qq.com/q/HVqNbzS1aM" style="display:none">点我查看所有</a>
    </div>

    <!-- 保持原有悬浮按钮和弹窗结构 -->
    <button id="favoriteButton" onclick="showFavoriteModal()">
        <img src="https://xiaobeirepo.github.io/repo2/Five-pointed_star.svg" alt="收藏">
    </button>
    <div id="modalBackground" onclick="hideFavoriteModal()"></div>
    <div id="favoriteModal">
        <h2>当前页面链接：</h2>
        <textarea id="pageLink" readonly></textarea>
        <br>
        <button onclick="copyToClipboard()">复制链接</button>
        <button onclick="hideFavoriteModal()">关闭</button>
    </div>

    <script>
        // 初始化数组（将由GitHub Actions自动填充）
let htmlFiles = [
    'https://pa-kos.github.io/vid2/sAfLxeoVynBR.html',
    'https://pa-kos.github.io/vid2/heimaosm.html',
    'https://pa-kos.github.io/vid2/uSXcNjSpwqMa.html',
    'https://pa-kos.github.io/vid2/ceshi.html',
    'https://pa-kos.github.io/vid2/vlrphEDNyKdJ.html',
    'https://pa-kos.github.io/vid2/e573VdJFptpc.html',
    'https://pa-kos.github.io/vid2/ceshi22.html',
    'https://pa-kos.github.io/vid2/lqjDiCcEUf.html',
    'https://pa-kos.github.io/vid2/ybDqxUBM.html',
    'https://pa-kos.github.io/vid2/ruolda.html',
    'https://pa-kos.github.io/vid2/oYwUjbssGOyQ.html',
    'https://pa-kos.github.io/vid2/pDpstFhUDmnK.html',
    'https://pa-kos.github.io/vid2/GRTLeLUQ.html',
    'https://pa-kos.github.io/vid2/GjrjrKEQWKWc.html',
    'https://pa-kos.github.io/vid2/output_1749415763.html',
    'https://pa-kos.github.io/vid2/gallery_1749416118.html',
    'https://pa-kos.github.io/vid2/suk6xhQ1h0F7.html',
    'https://pa-kos.github.io/vid2/pvinNuNHZfeV.html',
    'https://pa-kos.github.io/vid2/BjuHXIlJtRVP.html',
    'https://pa-kos.github.io/vid2/gDgvAwXTYLiJ.html',
    'https://pa-kos.github.io/vid2/NxgikthLROCx.html',
    'https://pa-kos.github.io/vid2/WxawSExEGkkw.html',
    'https://pa-kos.github.io/vid2/QYvCOErh.html',
    'https://pa-kos.github.io/vid2/ydrqXreZnBEx.html',
    'https://pa-kos.github.io/vid2/RalxhNXXRH.html',
    'https://pa-kos.github.io/vid2/cJqikGDjENYa.html',
    'https://pa-kos.github.io/vid2/yLIybiopHJ.html',
    'https://pa-kos.github.io/vid2/222.html',
    'https://pa-kos.github.io/vid2/123.html',
    'https://pa-kos.github.io/vid2/ojfezBsMOJ.html',
    'https://pa-kos.github.io/vid2/rgNyBRIUvqvH.html',
    'https://pa-kos.github.io/vid2/YQPvlseylh.html',
    'https://pa-kos.github.io/vid2/rDxHUPridq.html',
    'https://pa-kos.github.io/vid2/kqEFkopUFApz.html',
    'https://pa-kos.github.io/vid2/gFzVjqJklHwd.html',
    'https://pa-kos.github.io/vid2/PnTePEbASKUH.html',
    'https://pa-kos.github.io/vid2/RXnybfTHkrZv.html',
    'https://pa-kos.github.io/vid2/ebtjSNzRXbeA.html',
    'https://pa-kos.github.io/vid2/PdPwofou.html',
    'https://pa-kos.github.io/vid2/iPEEtluf.html'
];
                
                const response = await fetch(currentLoadedPage);
                if (!response.ok) {
                    htmlFiles.splice(randomIndex, 1);
                    throw new Error(`文件加载失败: HTTP ${response.status}`);
                }

                document.getElementById("content").innerHTML = await response.text();
                document.getElementById("favoriteButton").style.display = 'flex';
                document.getElementById("xunlei").style.display = 'inline';
            } catch (error) {
                console.error("加载错误:", error);
                document.getElementById("error-message").textContent = 
                    `加载失败: ${error.message}${retryCount < MAX_RETRIES ? ' 自动重试中...' : ''}`;
                
                if (retryCount++ < MAX_RETRIES) {
                    setTimeout(loadRandomPage, 1000);
                } else {
                    document.getElementById("content").innerHTML = `
                        <h1>内容加载失败</h1>
                        <p>${error.message}</p>
                        <button onclick="location.reload()">重新加载</button>
                    `;
                }
            }
        }

        // 保留原有弹窗功能
        function showFavoriteModal() { /* 原逻辑 */ }
        function hideFavoriteModal() { /* 原逻辑 */ }
        function copyToClipboard() { /* 原逻辑 */ }

        // 初始化
        window.onload = () => {
            replaceLinksIfNeeded();
            loadRandomPage();
        };
    </script>
</body>
</html>
